//
// Protocol buffers definition for Silo server
//
syntax = "proto3";
package pt.tecnico.sauron.silo.grpc;
import "google/protobuf/timestamp.proto";


// CAM JOIN
message CamJoinRequest {
    string local = 1;
    float latitude = 2;
    float longitude = 3;
}

message CamJoinResponse {
    //nothing to commit
}

// CAM INFO
message CamInfoRequest {
    string local = 1;
}

message CamInfoResponse {
    float latitude = 1;
    float longitude = 2;
}


enum ObjectType {
    PERSON = 0;
    CAR = 1;
}




// Track
message TrackRequest {
    ObjectType type = 1;
    string carId = 2;
    int64 personId = 3;
}

//Track Response
message ObservationResponse {
    ObjectType type = 1;
    string carId = 2;
    int64 personId = 3;
    google.protobuf.Timestamp timestamp = 4;
}

//TrackMatch
message TrackMatchRequest {
    ObjectType type = 1;
    // half info aka 7* or AA* or mix of both
    string carId = 2;
    int64 personId = 3;
}

//Trace
message TraceRequest {
    ObjectType type = 1;
    string carId = 2;
    int64 personId = 3;
}

//Trace and trackMatch Response
message ObservationsResponse {
    map<int32, ObservationResponse> list = 1;
}

service Silo{

    rpc CamJoin(CamJoinRequest) returns (CamJoinResponse);
    rpc CamInfo(CamInfoRequest) returns (CamInfoResponse);
    rpc Track(TrackRequest) returns (ObservationResponse);
    rpc TrackMatch(TrackMatchRequest) returns (ObservationsResponse);
    rpc Trace(TraceRequest) returns (ObservationsResponse);
}


























