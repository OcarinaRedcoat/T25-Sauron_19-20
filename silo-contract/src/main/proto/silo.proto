//
// Protocol buffers definition for Silo server
//
syntax = "proto3";
package pt.tecnico.sauron.silo.grpc;
import "google/protobuf/timestamp.proto";


// CamJoin Request
message CamJoinRequest {
    string local = 1;
    float latitude = 2;
    float longitude = 3;
}

message CamJoinResponse {
    string result = 1;
}

//CamInfo Request
message CamInfoRequest {
    string local = 1;
}

message CamInfoResponse {
    float latitude = 1;
    float longitude = 2;
}


//Report Request
message ReportRequest {
    ObjectType type = 1;
    string id = 2;
    string camName = 3;
}

message ReportResponse {
    bool error = 1;
}


enum ObjectType {
    PERSON = 0;
    CAR = 1;
}


//Track Response
message ObservationResponse {
    ObjectType type = 1;
    string id = 2;
    string camName = 3;
    google.protobuf.Timestamp timestamp = 4;
}


//Trace and trackMatch Response
message ObservationListResponse {
    repeated ObservationResponse Observationlist = 1;
}

// Track and Trace and TrackMatch
message TTTRequest {
    ObjectType type = 1;
    string id = 2;
}



service Silo{

    rpc CamJoin(CamJoinRequest) returns (CamJoinResponse);
    rpc CamInfo(CamInfoRequest) returns (CamInfoResponse);
    rpc Report(ReportRequest) returns (ReportResponse);
    rpc Track(TTTRequest) returns (ObservationResponse);
    rpc TrackMatch(TTTRequest) returns (ObservationListResponse);
    rpc Trace(TTTRequest) returns (ObservationListResponse);
}